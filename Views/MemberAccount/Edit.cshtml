@model NiagaraCollegeProject.ViewModels.MemberVM

@{
    ViewData["Title"] = "Edit Account";
}

<h4>Edit Account for @User.Identity.Name</h4>
<div class="text-danger">@TempData["message"]</div>
<hr />

@*Populate Pac ddl with related division fk*@
<script type="text/jscript">
    $(function ()
    {
        $('#division').change(function ()
        {        
            $.getJSON('/MemberAccount/GetPacList/' + $('#division').val(), function (data)
            {
                var items = '';
                $.each(data, function (i, PAC)
                {
                    items += "<option value='" + PAC.value + "'>" + PAC.text + "</option>";
                });
                $('#pac').html(items);
            });
        });
    });
</script>

<style>
    input:invalid {
  border: 2px dashed red;
}

input:valid {
  border: 2px solid green;
}

    input:invalid {
  border: 2px dashed red;
}

input:valid {
  border: 2px solid green;
}

</style>


@{
    var hasPicture = (Model.MemberPhoto?.Content != null);
    if(hasPicture)
    {
        @:<div>
        string imageBase64 = Convert.ToBase64String(Model.MemberPhoto.Content);
        string imageSrc = string.Format("data:" + Model.MemberPhoto.MimeType + ";base64, {0}", imageBase64);
        <img src="@imageSrc" alt="The profile picture of @Model.FullName" title="The profile picture of @Model.FullName" class="img-fluid rounded"/>
        @:</div><hr />
    }
}

<div class="row">
    <div class="col-md-4">
        <form asp-action="Edit" method="post" enctype="multipart/form-data">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <input type="hidden" asp-for="ID" />
            <div>
                @{
                    if(hasPicture){
                        <div class="row">
                            <div class="form-check m-3">
                                <input class="form-check-input" type="checkbox" id="chkRemoveImage" name="chkRemoveImage">
                                <label class="form-check-label" for="chkRemoveImage">
                                    <strong>Check To Remove Image</strong>
                                </label>
                            </div>
                        </div>
                    }
                }
            </div>
            <div class="form-group">
                <label asp-for="SalutationID" class="control-label"></label>
                <select asp-for="SalutationID" required class="form-control" asp-items="ViewBag.SalutationID"></select>
                <span asp-validation-for="SalutationID" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="FirstName" class="control-label"></label>
                <input asp-for="FirstName" required class="form-control" />
                <span asp-validation-for="FirstName" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="LastName" class="control-label"></label>
                <input asp-for="LastName" required class="form-control" />
                <span asp-validation-for="LastName" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="PhoneNumber" class="control-label"></label>
                <input asp-for="PhoneNumber" required class="form-control" />
                <span asp-validation-for="PhoneNumber" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="Email" class="control-label"></label>
                <input asp-for="Email" required class="form-control" />
                <span asp-validation-for="Email" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="EducationSummary" class="control-label"></label>
                <input asp-for="EducationSummary" class="form-control" />
                <span asp-validation-for="EducationSummary" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="OccupationalSummary" class="control-label"></label>
                <input asp-for="OccupationalSummary" class="form-control" />
                <span asp-validation-for="OccupationalSummary" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="StreetAddress" class="control-label"></label>
                <input asp-for="StreetAddress" class="form-control" />
                <span asp-validation-for="StreetAddress" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="CompanyProvince" class="control-label"></label>
                <select asp-for="CompanyProvince" required class="form-control" asp-items="@Html.GetEnumSelectList<Member.Provinces>()"></select>
                <span asp-validation-for="CompanyProvince" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="City" class="control-label"></label>
                <input asp-for="City" required class="form-control" />
                <span asp-validation-for="City" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="PostalCode" class="control-label"></label>
                <input asp-for="PostalCode" class="form-control" />
                <span asp-validation-for="PostalCode" class="text-danger"></span>
            </div>
            <div class="form-group form-check">
                <label class="form-check-label">
                    <input class="form-check-input" asp-for="MemberStatus" /> @Html.DisplayNameFor(model => model.MemberStatus)
                </label>
            </div>
            <div class="form-group form-check">
                <label class="form-check-label">
                    <input class="form-check-input" asp-for="NCGraduate" /> @Html.DisplayNameFor(model => model.NCGraduate)
                </label>
            </div>
            <div class="form-group">
                <label asp-for="CompanyName" class="control-label"></label>
                <input asp-for="CompanyName" required class="form-control" />
                <span asp-validation-for="CompanyName" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="CompanyStreetAddress" class="control-label"></label>
                <input asp-for="CompanyStreetAddress" class="form-control" />
                <span asp-validation-for="CompanyStreetAddress" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="CompanyProvince" class="control-label"></label>
                <select asp-for="CompanyProvince" required class="form-control" asp-items="@Html.GetEnumSelectList<Member.Provinces>()"></select>
                <span asp-validation-for="CompanyProvince" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="CompanyCity" class="control-label"></label>
                <input asp-for="CompanyCity" required class="form-control" />
                <span asp-validation-for="CompanyCity" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="CompanyPostalCode" class="control-label"></label>
                <input asp-for="CompanyPostalCode" class="form-control" />
                <span asp-validation-for="CompanyPostalCode" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="CompanyPhoneNumber" class="control-label"></label>
                <input asp-for="CompanyPhoneNumber" required class="form-control" />
                <span asp-validation-for="CompanyPhoneNumber" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="CompanyEmail" class="control-label"></label>
                <input asp-for="CompanyEmail" required class="form-control" />
                <span asp-validation-for="CompanyEmail" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="PreferredContact" class="control-label"></label>
                <select asp-for="PreferredContact" required class="form-control" asp-items="@Html.GetEnumSelectList<Member.Contact>()"></select>
                <span asp-validation-for="PreferredContact" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="CompanyPositionTitle" class="control-label"></label>
                <input asp-for="CompanyPositionTitle" required class="form-control" />
                <span asp-validation-for="CompanyPositionTitle" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label class="control-label custom-file-label">Picture File:</label>
                <div class="input-group mb-3">
                    <input type="file" class="form-control" name="thePicture" id="thePicture" />
                </div>
            </div>
            <div class="form-group">
                <input type="submit" value="Save" class="btn btn-primary" />
            </div>
        </form>
    </div>
</div>

<div>
    <a asp-action="Details">To profile</a>
</div>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    }
